<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Web Text Editor</title>
    <link rel="stylesheet" href="index.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>

<body>
    <h1>Basic Text Editor</h1>

    <div id="functions">
        <button class="function-button" onclick="capitalizeText()"><i class="fa fa-font"></i> &nbsp Capitalize</button>
        <button class="function-button" onclick="insertBulletPoint()"><i class="fa fa-list-ul"></i> &nbsp Bullet
            Point</button>
    </div>

    <textarea id="editor"></textarea>

    <div id="buttons">
        <button class="function-button" onclick="saveText()"><i class="fa fa-save"></i> &nbsp Save</button>
        <button class="function-button" onclick="clearRecentSavedList()"><i class="fa fa-trash"></i> &nbspClear
            List</button>
    </div>

    <div id="recentlySaved">
        <h2>Recently Saved:</h2>
        <ul id="recentlySavedList"></ul>
    </div>

    <script>
        const editor = document.getElementById('editor');
        const recentlySavedList = document.getElementById('recentlySavedList');

        function saveText() {
            const textToSave = editor.value;
            const timestamp = new Date().toLocaleString();
            const savedTextItem = `${timestamp}: ${textToSave}`;

            // Save to localStorage
            localStorage.setItem(timestamp, textToSave);

            // Update the list of recently saved texts
            const li = document.createElement('li');
            li.textContent = savedTextItem;
            li.setAttribute('data-timestamp', timestamp);
            li.addEventListener('click', loadSavedText);
            recentlySavedList.appendChild(li);

            alert('Text saved successfully!');
        }

        function loadSavedText(event) {
            const timestamp = event.target.getAttribute('data-timestamp');
            const savedText = localStorage.getItem(timestamp);
            editor.value = savedText;
            alert('Text loaded successfully!');
        }

        //captalize  bullet functions
        function capitalizeText() {
            const selectedText = editor.value.substring(editor.selectionStart, editor.selectionEnd);
            const newText = selectedText.toUpperCase();
            editor.setRangeText(newText, editor.selectionStart, editor.selectionEnd, 'end');
        }

        function insertBulletPoint() {
            const selectedText = editor.value.substring(editor.selectionStart, editor.selectionEnd);
            const newText = `• ${selectedText.replace(/\n/g, '\n• ')}`;
            editor.setRangeText(newText, editor.selectionStart, editor.selectionEnd, 'end');
        }

        // Populate the list of recently saved texts on page load
        for (let i = 0; i < localStorage.length; i++) {
            const key = localStorage.key(i);
            const text = localStorage.getItem(key);
            const savedTextItem = `${key}: ${text}`;

            const li = document.createElement('li');
            li.textContent = savedTextItem;
            li.setAttribute('data-timestamp', key);
            li.addEventListener('click', loadSavedText);
            recentlySavedList.appendChild(li);
        }

        //flush local starage
        function clearRecentSavedList() {
            // Remove all child elements (saved items) from the recentlySavedList div
            while (recentlySavedList.firstChild) {
                recentlySavedList.removeChild(recentlySavedList.firstChild);
            }
        }
    </script>
</body>

</html>